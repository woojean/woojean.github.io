I"©%<ul id="markdown-toc">
  <li><a href="#configè§£æ" id="markdown-toc-configè§£æ">configè§£æ</a></li>
  <li><a href="#ormç¼“å­˜" id="markdown-toc-ormç¼“å­˜">ormç¼“å­˜</a></li>
  <li><a href="#transientmodel" id="markdown-toc-transientmodel">TransientModel</a></li>
  <li><a href="#å¦‚æœåœ¨æ•°æ®åº“å·²æœ‰è®°å½•çš„æƒ…å†µä¸‹æ‰§è¡Œ-i-baseä¼šé‡ç½®æ•°æ®åº“å—é«˜å±æ“ä½œ" id="markdown-toc-å¦‚æœåœ¨æ•°æ®åº“å·²æœ‰è®°å½•çš„æƒ…å†µä¸‹æ‰§è¡Œ-i-baseä¼šé‡ç½®æ•°æ®åº“å—é«˜å±æ“ä½œ">å¦‚æœåœ¨æ•°æ®åº“å·²æœ‰è®°å½•çš„æƒ…å†µä¸‹æ‰§è¡Œ-i baseä¼šé‡ç½®æ•°æ®åº“å—ï¼Ÿï¼ˆé«˜å±æ“ä½œï¼ï¼ï¼ï¼‰</a></li>
  <li><a href="#phpè°ƒç”¨" id="markdown-toc-phpè°ƒç”¨">PHPè°ƒç”¨</a></li>
  <li><a href="#çœ‹ä¸è§saleæ¨¡å—" id="markdown-toc-çœ‹ä¸è§saleæ¨¡å—">çœ‹ä¸è§saleæ¨¡å—</a></li>
  <li><a href="#æƒé™é—®é¢˜å¯¼è‡´å·²å®‰è£…åº”ç”¨èœå•ä¸æ˜¾ç¤º" id="markdown-toc-æƒé™é—®é¢˜å¯¼è‡´å·²å®‰è£…åº”ç”¨èœå•ä¸æ˜¾ç¤º">æƒé™é—®é¢˜å¯¼è‡´å·²å®‰è£…åº”ç”¨èœå•ä¸æ˜¾ç¤º</a></li>
  <li><a href="#irmodelaccesscsv" id="markdown-toc-irmodelaccesscsv">ir.model.access.csv</a></li>
  <li><a href="#attributeerror-module-odooapi-has-no-attribute-multi" id="markdown-toc-attributeerror-module-odooapi-has-no-attribute-multi">AttributeError: module â€˜odoo.apiâ€™ has no attribute â€˜multiâ€™</a></li>
</ul>

<h1 id="configè§£æ">configè§£æ</h1>
<p>/tools/config.py
_parse_configå‡½æ•°ï¼Œoptå˜é‡ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'config': None, 'save': False, 'init': None, 'update': None, 'without_demo': None, 'import_partial': None, 'pidfile': None, 'addons_path': None, 'upgrade_path': None, 'server_wide_modules': None, 'data_dir': None, 'http_interface': None, 'http_port': None, 'longpolling_port': None, 'http_enable': None, 'proxy_mode': None, 'dbfilter': None, 'test_file': None, 'test_enable': None, 'test_tags': None, 'screencasts': None, 'screenshots': None, 'logfile': None, 'syslog': None, 'log_handler': [], 'log_db': None, 'log_db_level': None, 'log_level': None, 'email_from': None, 'smtp_server': None, 'smtp_port': None, 'smtp_ssl': None, 'smtp_user': None, 'smtp_password': None, 'db_name': None, 'db_user': None, 'db_password': None, 'pg_path': None, 'db_host': None, 'db_port': None, 'db_sslmode': None, 'db_maxconn': None, 'db_template': None, 'load_language': None, 'language': None, 'translate_out': None, 'translate_in': None, 'overwrite_existing_translations': None, 'translate_modules': None, 'list_db': None, 'dev_mode': None, 'shell_interface': None, 'stop_after_init': None, 'osv_memory_count_limit': None, 'osv_memory_age_limit': None, 'max_cron_threads': None, 'unaccent': None, 'geoip_database': None, 'workers': None, 'limit_memory_soft': None, 'limit_memory_hard': None, 'limit_time_cpu': None, 'limit_time_real': None, 'limit_time_real_cron': None, 'limit_request': None}
</code></pre></div></div>

<h1 id="ormç¼“å­˜">ormç¼“å­˜</h1>
<p>/tools/cache.py</p>

<p>LRU cache decorator for model methods.
The parameters are strings that represent expressions referring to the signature of the decorated method, and are used to compute a cache key.</p>

<p>Demo:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">ormcache</span><span class="p">(</span><span class="s">'model_name'</span><span class="p">,</span> <span class="s">'mode'</span><span class="p">)</span>
	<span class="k">def</span> <span class="nf">_compute_domain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">"read"</span><span class="p">):</span>
		<span class="p">...</span>
</code></pre></div></div>
<p>Methods implementing this decorator should never return a Recordset,because the underlying cursor will eventually be closed and raise a <code class="language-plaintext highlighter-rouge">psycopg2.OperationalError</code>.</p>

<p><strong>æ€»ç»“:</strong></p>
<ul>
  <li>å†…å­˜ç¼“å­˜ï¼›</li>
  <li>LRUç®—æ³•ï¼›</li>
  <li>åŸºäºæ–¹æ³•è£…é¥°å™¨ç”Ÿæˆkeyï¼Œæ–¹æ³•æ‰§è¡Œç»“æœä¸ºvalueï¼Œæ‰€ä»¥åº”è¯¥åœ¨çº¯å‡½æ•°ä¸­ä½¿ç”¨ï¼›</li>
</ul>

<h1 id="transientmodel">TransientModel</h1>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">TransientModel</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="s">""" Model super-class for transient records, meant to be temporarily
    persistent, and regularly vacuum-cleaned.

    A TransientModel has a simplified access rights management, all users can
    create new records, and may only access the records they created. The
    superuser has unrestricted access to all TransientModel records.
    """</span>
    <span class="n">_auto</span> <span class="o">=</span> <span class="bp">True</span>                <span class="c1"># automatically create database backend
</span>    <span class="n">_register</span> <span class="o">=</span> <span class="bp">False</span>           <span class="c1"># not visible in ORM registry, meant to be python-inherited only
</span>    <span class="n">_abstract</span> <span class="o">=</span> <span class="bp">False</span>           <span class="c1"># not abstract
</span>    <span class="n">_transient</span> <span class="o">=</span> <span class="bp">True</span>           <span class="c1"># transient
</span></code></pre></div></div>
<p>TransientModelæ˜¯ä¸€ç§ç‰¹æ®Šçš„Modelï¼ŒTransientModelå¯¹åº”çš„æ•°æ®è¡¨ä¸­çš„æ•°æ®ç³»ç»Ÿä¼šå®šæ—¶çš„æ¸…ç†ï¼›TransientModelçš„æ•°æ®åªèƒ½åšä¸´æ—¶æ•°æ®ä½¿ç”¨ï¼Œä¸€èˆ¬å‘å¯¼å¯¹è±¡æ¨¡å‹ä¼šå£°æ˜æˆTransientModelã€‚</p>

<h1 id="å¦‚æœåœ¨æ•°æ®åº“å·²æœ‰è®°å½•çš„æƒ…å†µä¸‹æ‰§è¡Œ-i-baseä¼šé‡ç½®æ•°æ®åº“å—é«˜å±æ“ä½œ">å¦‚æœåœ¨æ•°æ®åº“å·²æœ‰è®°å½•çš„æƒ…å†µä¸‹æ‰§è¡Œ-i baseä¼šé‡ç½®æ•°æ®åº“å—ï¼Ÿï¼ˆé«˜å±æ“ä½œï¼ï¼ï¼ï¼‰</h1>
<p>æ‰§è¡Œï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>update account_account set name = 'winston' where id =1;
</code></pre></div></div>

<p>å†æ‰§è¡Œï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./odoo-bin --config=config/odoo.conf -i base
</code></pre></div></div>

<p>æŸ¥è¯¢ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>select * from account_account where id =1;
</code></pre></div></div>
<p>å‘ç°idä¸º1çš„è®°å½•ï¼Œnameä»ç„¶æ˜¯winstonï¼Œä½†æ˜¯ä¹‹å‰å®‰è£…çš„saleæ¨¡å—çš„ç›¸å…³è¡¨éƒ½ä¸è§äº†ï¼ˆå³sale_å‰ç¼€çš„è¡¨ï¼‰ï¼ŒåŒæ—¶åœ¨ç½‘ç«™å¯ä»¥çœ‹åˆ°salsæ¨¡å—æ˜¯å·²å®‰è£…çŠ¶æ€ã€‚
å³æ¨¡å—å·²å®‰è£…ï¼Œä½†æ˜¯æ•°æ®è¡¨æ²¡æœ‰äº†ï¼Œäºæ˜¯ä¼šæœ‰å¦‚ä¸‹å„ç§æŠ¥é”™ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2020-05-08 06:06:43,866 19496 ERROR odoo_db odoo.modules.loading: Some modules have inconsistent states, some dependencies may be missing: ['sale_crm', 'sale_management']
2020-05-08 06:06:43,867 19496 ERROR odoo_db odoo.modules.loading: Some modules are not loaded, some dependencies or manifest may be missing: ['crm', 'crm_sms', 'procurement_jit', 'sale', 'sale_stock', 'sales_team', 'website_crm', 'website_crm_sms']
</code></pre></div></div>

<h1 id="phpè°ƒç”¨">PHPè°ƒç”¨</h1>
<p>ä½¿ç”¨äº†Ripcordåº“ï¼Œå®ƒæä¾›ä¸€ç§ç®€å•çš„XML-RPC APIã€‚ Ripcordè¦æ±‚åœ¨PHPå®‰è£…ä¸­å¯ç”¨å¯¹XML-RPCæ”¯æŒã€‚
å› ä¸ºè°ƒç”¨é€šè¿‡HTTPSè¿›è¡Œæ‰§è¡Œï¼Œè¿˜è¦æ±‚å¯ç”¨OpenSSLæ’ä»¶ã€‚</p>

<p>æŠ¥é”™ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PHP XMLRPC library is not installed
</code></pre></div></div>

<p>å®‰è£…php xmlrpcæ‰©å±•ï¼š</p>

<p>https://github.com/php/php-src</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /Users/wujian/extensions/php-src-master/ext/xmlrpc
sudo phpize
sudo ./configure
sudo make &amp; make install 


</code></pre></div></div>

<p>é™„ï¼š
RPMåŒ…ï¼š
https://www.rpmfind.net/linux/rpm2html/search.php?query=xmlrpc.so()(64bit)</p>

<p>MAMPçš„é»˜è®¤phpæ‰©å±•ä½ç½®ï¼š
/Applications/MAMP/bin/php/php7.1.1/lib/php/extensions/no-debug-non-zts-20160303</p>

<p>CentOSä¸Šç¼–è¯‘çš„soæ–‡ä»¶ï¼Œæ‹¿åˆ°Macä¸Šç…§æ ·ä½¿ç”¨ï¼Œå¯èƒ½æ˜¯å› ä¸ºè¿™ä¸ªåº“å¹´ä»£ä¹…è¿œçš„ç¼˜æ•…ã€‚</p>

<h1 id="çœ‹ä¸è§saleæ¨¡å—">çœ‹ä¸è§saleæ¨¡å—</h1>
<p>/Users/wujian/Library/Application Support/Odoo/addons/13.0</p>

<h1 id="æƒé™é—®é¢˜å¯¼è‡´å·²å®‰è£…åº”ç”¨èœå•ä¸æ˜¾ç¤º">æƒé™é—®é¢˜å¯¼è‡´å·²å®‰è£…åº”ç”¨èœå•ä¸æ˜¾ç¤º</h1>
<p>Exception: æ¨¡å—åŠ è½½ bug-manage å¤±è´¥: æ–‡ä»¶ bug-manage/security/ir.model.access.csv æ— æ³•å¤„ç†:
 åœ¨å­—æ®µâ€™Objectâ€™ä¸­æ²¡æ‰¾åˆ°åŒ¹é…çš„è®°å½•å¤–éƒ¨id â€˜model_bug-manage_bug-manageâ€™
æ‰¾ä¸åˆ°å­—æ®µ â€˜Objectâ€™ (model_id)æ‰€éœ€çš„å€¼</p>

<p>é»˜è®¤ï¼š
id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink
access_bug-manage_bug-manage,bug-manage.bug-manage,model_bug-manage_bug-manage,base.group_user,1,1,1,1</p>

<p>æ”¹ä¸ºï¼š
id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink
access_bug-manage_bug-manage,bug-manage.bug-manage,model_bm_bug,base.group_user,1,1,1,1</p>

<h1 id="irmodelaccesscsv">ir.model.access.csv</h1>

<h1 id="attributeerror-module-odooapi-has-no-attribute-multi">AttributeError: module â€˜odoo.apiâ€™ has no attribute â€˜multiâ€™</h1>
<p>After searching in github found that â€˜multiâ€™ is removed from Odoo 13.0 as it will be default.</p>

:ET